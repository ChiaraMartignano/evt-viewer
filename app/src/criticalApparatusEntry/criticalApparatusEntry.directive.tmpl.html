<div 
  class="critical-apparatus-entry"
  ng-mouseover="vm.toggleOverAppEntries($event);"
  ng-mouseout="vm.toggleOverAppEntries($event)">
  <div 
    class="critical-apparatus-entry_main-content">
      <div class="critical-apparatus-entry_tools">
        <button-switch 
              title="Align Readings"
              data-label=""
              data-icon="v-align"
              data-type="alignReadings"
              ng-click="vm.alignReadings()"></button-switch>
        <button-switch 
              title="Toggle Pin"
              data-label=""
              data-icon="pin"
              data-type="pinReading"
              ng-class="{'active' : vm.isPinned()}"
              ng-click="vm.togglePin()"></button-switch>
      </div>
      <span 
        ng-if="vm.content.lemma.content !== ''"
        compile="vm.content.lemma.content"></span> 
      <span 
        class="app_reading"
        ng-repeat="reading in vm.content.significantReadings" 
        compile="reading.content"></span> 
  </div>
  <div class="critical-apparatus-entry_other-content"
       ng-if="vm.tabs._indexes.length > 0">

      <div class="critical-apparatus-entry_other-content_headers">
          <span ng-repeat="tab in vm.tabs._indexes"
                ng-click="vm.toggleSubContent(tab)"
                ng-class="{'active' : vm._subContentOpened == tab }">
                {{ vm.tabs[tab].label }}
          </span>
      </div>
      <div class="critical-apparatus-entry_other-content_panels">
          <div class="critical-apparatus-entry_other-content_panel"
                ng-repeat="tab in vm.tabs._indexes"
                ng-class="{'active' : vm._subContentOpened == tab}"
                ng-switch="tab">
                <div ng-switch-when="notSignificantReadings">
                  <ul>
                      <li ng-repeat="reading in vm.content.notSignificantReadings" compile="reading.content"></li>
                  </ul>
                </div>
                <div ng-switch-when="moreInfo">
                  <strong>Apparatus entry details:</strong>
                  <ul>
                      <li ng-repeat="attr in vm.content.attributes._keys">
                          <strong>{{attr}}:</strong> {{vm.content.attributes.values[attr]}}
                      </li>
                  </ul>
                  <strong>Readings details:</strong>
                  <ul>
                      <li ng-if="vm.content.lemma.attributes._keys.length > 0">
                          <span compile="vm.content.lemma.content"></span>
                          <ul>
                            <li ng-repeat="attr in vm.content.lemma.attributes._keys">
                                <strong>{{attr}}:</strong> {{vm.content.lemma.attributes.values[attr]}}
                            </li>
                          </ul>
                      </li>

                      <li ng-repeat="reading in vm.content.significantReadings">
                          <span class="app_reading" compile="reading.content"></span>
                          <ul>
                            <li ng-repeat="attr in reading.attributes._keys">
                                <strong>{{attr}}:</strong> {{reading.attributes.values[attr]}}
                            </li>
                          </ul>
                      </li>

                      <li ng-repeat="reading in vm.content.notSignificantReadings">
                          <span class="app_reading" compile="reading.content"></span>
                          <ul>
                            <li ng-repeat="attr in reading.attributes._keys">
                                <strong>{{attr}}:</strong> {{reading.attributes.values[attr]}}
                            </li>
                          </ul>
                      </li>
                  </ul>
                </div>
                <div ng-switch-when="xmlSource">
                  <pre>{{ vm.content[tab] | prettyXml }}</pre>
                </div>
                <div ng-switch-default
                     compile="vm.content[tab]">
                </div>
          </div>
      </div>
  </div>
</div>