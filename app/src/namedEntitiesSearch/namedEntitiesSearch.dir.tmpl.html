<div class="NE-search">
  <div class="NE-search_form">
    <div>
      <label>
          Cerca forme
          <input type="radio" value="text" ng-model="vm.field">
        </label>
        <label>
          Cerca forma normalizzata
          <input type="radio" value="ref" ng-model="vm.field">
        </label>
    </div>
    <div>
      <input type="text" ng-model="vm.inputValue" autocomplete="off" autofocus>
      <button
        ng-click="search()">Cerca forme</button>
    </div>
    <div>
      <span>Filtra per lingua</span>
      <label ng-repeat="lang in vm.langs._indexes track by $index">
        {{lang}}
        <input type="checkbox" ng-checked="vm.langs[lang]" ng-model="vm.langs[lang]" ng-click="selectLang()"/>
      </label>
      <label>
        <span>Seleziona tutte</span>
        <input type="checkbox" ng-click="selectAllLangs($event)"/>
      </label>
    </div>
  </div>
  <div ng-if="vm.resultsAvailable">
    <div class="NE-search_result" ng-repeat="result in vm.results">
        <ng-container ng-if="checkLangs([result])">
          <div ng-if="result._result !== result._ref">{{result._result}}</div>
          <div ng-click="openNamedEntity(result._ref)">{{result._ref}}</div>
          <div ng-repeat="lang in result._langs">
            <ng-container ng-if="vm.langs[lang]">
              <p>{{lang + ' (' + result[lang]._indexes.length + ' forme)'}}</p>
              <ul>
                <li ng-repeat="form in result[lang]._indexes">
                  {{form}}
                  <ul ng-repeat="doc in result[lang][form].docsId">
                    <li>
                      <span class="docLink" ng-click="goToDiv(doc)">{{result[lang][form].docs[doc].label}}</span>
                      <ul ng-repeat="div in result[lang][form].docs[doc].divs track by $index">
                        <span class="divLink" ng-click="goToDiv(doc, result[lang][form].docs[doc].divsId[$index])">{{div}}</span>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </ng-container>
          </div>
        </ng-container>
      </div>
  </div>
  <div ng-if="!vm.resultsAvailable">
    Nessun risultato trovato nelle lingue selezionate
  </div>
</div>